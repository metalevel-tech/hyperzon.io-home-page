class Blog{constructor(){(this.constructor.instance||((this.constructor.instance=this).selectors={blogGrid:"#blog-section .blog-grid",blogPosts:".blog-post-wrapper"},this.postMaxScale_x3=1.1,this.postMaxScale_x2=1.2,this.postMaxScale_x1=1.3,this.scaleBreakPt_x3=1366,this.scaleBreakPt_x2=1024,this.scaleBreakPt_x1=768,this.grid=null,this.posts=[],this)).init()}static instance=null;static attached=!1;init(){this.selectGrig()&&this.selectPosts()&&(this.readGridProps(),this.scalePosts(),this.initEventHandlers())}selectGrig(){return this.grid=document.querySelector(this.selectors.blogGrid),!!this.grid}selectPosts(){return this.posts=Array.from(this.grid.querySelectorAll(this.selectors.blogPosts)),!!this.grid}readGridProps(){this.shouldRun()&&(this.grid.defaultPostHeight=parseInt(this.grid.dataset.defaultPostHeight,10),this.grid.defaultPostWidth=parseInt(this.grid.dataset.defaultPostWidth,10),this.grid.defaultGridVMargin=parseInt(window.getComputedStyle(this.grid).marginTop,10))}initEventHandlers(){!this.shouldRun()||this.constructor.attached||(this.constructor.attached=!0,window.addEventListener("resize",this.scalePosts.bind(this)),window.addEventListener("orientationChange",this.scalePosts.bind(this)))}scalePosts(){if(this.shouldRun()){const a=parseInt(this.grid.defaultPostWidth,10),o=parseInt(this.grid.defaultPostHeight,10),h=parseInt(this.grid.defaultGridVMargin,10),n=this.grid;this.posts.forEach((t,s,i)=>{var e=t.offsetWidth;let r=parseFloat(e/a).toFixed(2);r=window.innerWidth<this.scaleBreakPt_x1?Math.min(r,this.postMaxScale_x1):window.innerWidth<this.scaleBreakPt_x2?Math.min(r,this.postMaxScale_x2):Math.min(r,this.postMaxScale_x3);e=parseInt(o*r,10);t.style.height=e+"px",t.querySelector(".blog-post-scalable").style.transform=`scale(${r})`,s===i.length-1&&((t=parseInt((e-o)/2,10))<0?(s=h+t,n.style.marginTop=0<=s?s+"px":"0"):n.style.marginTop=h+"px")})}}shouldRun(){return!(!this.grid||!this.posts)}}function blogInit(){return new Blog}export{blogInit};