const nodes={galleryOverlay:document.getElementById("gallery-preview-overlay"),galleryContent:document.getElementById("gallery-preview-overlay").querySelector(".gallery-preview-content"),galleryButtonClose:document.getElementById("gallery-preview-overlay").querySelector(".button-3x"),galleryButtonNext:document.getElementById("gallery-preview-overlay").querySelector(".gallery-preview-next"),galleryButtonBack:document.getElementById("gallery-preview-overlay").querySelector(".gallery-preview-back")};class galleryUrlArray{constructor(e=!1,t=[]){this.current=e,this.list=t}get currentSrc(){return"IMG"===this.current.nodeName?this.current.src:"A"===this.current.nodeName?this.current.href:"VIDEO"===this.current.nodeName&&this.current.querySelector("source").src}findNext(){var e=this.list.indexOf(this.current);return-1!==e&&(this.list[e+1]||this.list[0])}findBack(){var e=this.list.indexOf(this.current);return-1!==e&&(this.list[e-1]||this.list[this.list.length-1])}}function galleryOverlayClear(){nodes.galleryOverlay.querySelectorAll("video").forEach(function(e){try{e.pause(),e.load(),e.src="",e.remove()}catch(e){console.log(e)}}),nodes.galleryButtonBack.removeEventListener("click",galleryChange_Video),nodes.galleryButtonNext.removeEventListener("click",galleryChange_Video),window.removeEventListener("resize",calcHeightOnDeviceTilt),window.removeEventListener("orientationChange",calcHeightOnDeviceTilt),nodes.galleryOverlay.querySelectorAll("img").forEach(function(e){try{e.src="",e.remove()}catch(e){console.log(e)}}),nodes.galleryButtonBack.removeEventListener("click",galleryChange_Image),nodes.galleryButtonNext.removeEventListener("click",galleryChange_Image),windowScroll(!0),nodes.galleryOverlay.classList.remove("active"),nodes.galleryButtonClose.classList.remove("active"),nodes.galleryButtonNext.classList.remove("active"),nodes.galleryButtonBack.classList.remove("active")}function galleryOverlayCloseButtonAddAction(){nodes.galleryButtonClose.handled||(nodes.galleryButtonClose.handled=!0,nodes.galleryButtonClose.addEventListener("click",galleryOverlayClear),window.addEventListener("keydown",e=>{"Escape"===e.key&&galleryOverlayClear()}))}function overlayActivate(){windowScroll(!1),nodes.galleryOverlay.classList.add("active"),setTimeout(function(){nodes.galleryButtonClose.classList.add("active"),nodes.galleryButtonNext.classList.add("active"),nodes.galleryButtonBack.classList.add("active"),galleryOverlayCloseButtonAddAction()},100)}function windowScroll(e=!0){if(e)window.onscroll=()=>{},document.body.classList.remove("no-scroll");else{document.body.classList.add("no-scroll");const t=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft;window.onscroll=e=>{e.preventDefault(),window.scrollTo(l,t)}}}function galleryChange_Image(e,t=!0){const l=nodes.galleryContent.querySelector("img.image-preview");return!!l&&!!(t=t?e.findNext():e.findBack())&&(e.current=t,l.classList.add("static"),void setTimeout(function(){l.setAttribute("src",""),setTimeout(function(){l.setAttribute("src",e.currentSrc),l.classList.remove("static")},150)},150))}function galleryChange_Video(e,t=!0){var l=nodes.galleryContent.querySelector("video.video-preview");return!!l&&!!(t=t?e.findNext():e.findBack())&&(e.current=t,void(l.src=e.currentSrc))}function galleryOverlayCreate_Image(e,t){galleryOverlayClear(),t.current=e;e=document.createElement("img");e.setAttribute("class","image-preview"),e.setAttribute("src",t.currentSrc),nodes.galleryContent.appendChild(e),overlayActivate(),nodes.galleryButtonNext.addEventListener("click",galleryChange_Image.bind(this,t,!0)),nodes.galleryButtonBack.addEventListener("click",galleryChange_Image.bind(this,t,!1))}function galleryOverlayCreate_Video(e,t){galleryOverlayClear(),t.current=e;const l=document.createElement("video");e=document.createElement("source");l.setAttribute("autoplay",""),l.setAttribute("controls",""),l.setAttribute("playsinline",""),l.setAttribute("muted",""),l.setAttribute("class","video-preview"),l.volume=.4,l.setAttribute("src",t.currentSrc),e.setAttribute("src",t.currentSrc),e.setAttribute("type","video/webm"),l.appendChild(e),l.onended=e=>{galleryChange_Video(t,!0)},nodes.galleryContent.appendChild(l),setTimeout(function(){calcHeightOnDeviceTilt(l)},100),window.addEventListener("resize",calcHeightOnDeviceTilt.bind(this,l)),window.addEventListener("orientationChange",calcHeightOnDeviceTilt.bind(this,l)),overlayActivate(),nodes.galleryButtonNext.addEventListener("click",galleryChange_Video.bind(this,t,!0)),nodes.galleryButtonBack.addEventListener("click",galleryChange_Video.bind(this,t,!1))}function setHeight_16_9(e){if(!e)return!1;e.style.height=Math.floor(9*e.offsetWidth/16+2)+"px"}function calcHeightOnDeviceTilt(t){if(!t)return!1;setTimeout(function(){var e=window.innerHeight-90;e<=t.offsetHeight?(t.style.height=Math.floor(2+e)+"px",t.style.width=Math.floor(16*e/9)+"px"):setTimeout(()=>{t.style.height="",t.style.width=""},200)},100)}function createTestimonialsSlider(e){$(e).slick({infinite:!0,slidesToShow:4,slidesToScroll:1,dots:!1,arrows:!0,autoplay:!1,autoplaySpeed:5e3,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1,infinite:!0}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}}]})}function galleryHandler_Images(){var e=[...document.querySelectorAll(".image-gallery")];e.length&&e.forEach(function(e){e=[...e.querySelectorAll(".image-item")];const t=new galleryUrlArray(!1,e);t.list.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),galleryOverlayClear(),galleryOverlayCreate_Image(e.target.closest(".image-item"),t)})})})}function galleryHandler_PostPageImgs(){var e=[...document.querySelectorAll(".single-post-content-section img")];if(e.length){const t=new galleryUrlArray(!1,e);t.list.forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",e=>{e.preventDefault(),galleryOverlayClear(),galleryOverlayCreate_Image(e.target,t)})})}}function galleryHandler_Videos(){var e=[...document.querySelectorAll(".video-gallery")];e.length&&e.forEach(e=>{e=[...e.querySelectorAll(".video-item")];const t=new galleryUrlArray(!1,e);t.list.forEach(e=>{e.addEventListener("loadeddata",()=>{e.loaded||(e.loaded=!0,e.loaded&&e.paused&&e.play())}),e.addEventListener("mouseenter",()=>{e.loaded&&e.paused?e.play():e.load()}),e.addEventListener("mouseleave",()=>{setTimeout(()=>{e.loaded&&!e.paused&&e.pause()},500)}),e.addEventListener("click",e=>{e.preventDefault(),galleryOverlayClear(),galleryOverlayCreate_Video(e.target,t)})})})}function galleryHandler_Testimonials(){var e=[...document.querySelectorAll(".testimonials .testimonials__gallery")];e.length&&e.forEach(t=>{var e=t.querySelector(".testimonials__slider__wrapper"),l=(createTestimonialsSlider(e),[...t.querySelectorAll(".testimonials__gallery__item")]);const r=new galleryUrlArray(!1,l);l=[...e.querySelectorAll(".testimonials__slider__item")];const n=new galleryUrlArray(!1,l),a=(n.list.forEach(e=>{!1===n.current&&e.classList.contains("selected")&&e.classList.contains("slick-active")&&(n.current=e),e.addEventListener("click",e=>{e.preventDefault(),e.currentTarget.classList.contains("selected")||(n.list.forEach(e=>{e.classList.remove("selected")}),n.current=e.currentTarget,n.list.forEach(e=>{e.dataset.id===n.current.dataset.id&&e.classList.add("selected")}),t.style.height=t.offsetHeight+"px",r.list.forEach(e=>{e.classList.remove("selected"),e.classList.add("hidden")}),r.current=r.list.find(e=>e.dataset.id===n.current.dataset.id),r.current.classList.remove("hidden"),r.current.classList.add("selected"),t.style.height="")})}),new galleryUrlArray(!1,r.list.map(e=>{var e=e.querySelector(".video-anchor").href,t=document.createElement("video"),l=document.createElement("source");return l.src=e,t.appendChild(l),t.setAttribute("src",e),t})));r.list.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),galleryOverlayClear(),galleryOverlayCreate_Video(a.list.find(e=>e.src===t.currentTarget.querySelector(".video-anchor").href),a)})})})}export{galleryHandler_Images,galleryHandler_PostPageImgs,galleryHandler_Videos,galleryHandler_Testimonials};